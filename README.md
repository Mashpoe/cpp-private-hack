# cpp-private-hack
A header file that allows private class methods to be publicly accessible through the use of a template hack.

More details on the inner workings of this library can be found [here](https://accu.org/journals/overload/28/156/harrison_2776/).

# Usage

`hack.hpp` mainly just consists of one macro which is used to generate the necessary template code to hijack a private class method.

In order to hijack a method, you need two things: the identifier for the private method and your own personal access identifier. The latter will be converted into a function that returns function pointer to the hijacked method:

```cpp
#include <iostream>
#include "hack.hpp"

// this class is not actually as secure as its name would imply
class Secure {
private:
	
	int value = 3;
	
	void setValue(int v) {
		this->value = v;
	}

public:

	int getValue() {
		return this->value;
	}
	
};

// this macro must not be used inside a function body.
// the first argument is the name of the method we want to hijack,
// the second argument will be used to generate our "hijack" function.
hijack_method(Secure::setValue, hijack_setValue);

// now we just call the "hijack_setValue" function that was generated by the above macro call.
// the function type cannot be preserved by the hijack function,
// so you must cast it to the correct type yourself:
auto hijack_func_ptr = reinterpret_cast<void (Secure::*)(int)>(hijack_setValue());

int main() {
	
	// create a "Secure" object
	Secure s;
	
	// should print the default value of 3
	std::cout << "the value of s is " << s.getValue() << std::endl;
	
	// call the hijacked method on the object "s"
	(s.*hijack_func_ptr)(10);
	
	// should now print the new value of 10
	std::cout << "the value of s is " << s.getValue() << std::endl;
	
}
```
